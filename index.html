<!DOCTYPE html>
<html lang = "en">
  <head>
    <!--Browser tab-->
    <link rel=icon href=""  type="image/png">
    <title>Hannah Dettmann</title>
    <!--Meta ish-->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Hannah Dettmann">

    <!--Bootstrap-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <!--Google Fonts-->
        <link href="https://fonts.googleapis.com/css?family=Comfortaa:300,400" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Roboto:100,300" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Josefin+Slab" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Merriweather" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Black+Han+Sans|Lato|Righteous" rel="stylesheet">
    <!--Custom styles-->
    <link href="css/style.css" rel="stylesheet" type="text/css">
  </head>

<section id="section_three">
      <div class="container">
        <div class="row game_title">
          <div class="col-10">
            <h1 id="winner" class="text-center info_title" style="padding-top: 5px;">CSS Adventure</h1>
          </div>
          <br>
        </div>
          <script>
              function make_base()
              {
                var canvas = document.getElementById('viewport2'),
                context = canvas.getContext('2d');
                base_image = new Image();
                base_image.src = 'img/mermaid.png';
                context.drawImage(base_image, -200, -200);

              }
          </script>
          <!-- Move Mermaid Function -->
          <script>

          	function gameOver(){
              var fish = document.getElementById('fish_blue');
              var y = parseInt(fish.style.top);
              var x = parseInt(fish.style.left);

              var man = document.getElementById("manatee");
              var top = parseInt(man.style.top);
              var right = parseInt(man.style.left);

              if( y > (top - 110) && y < (top + 270)){
                if(x > (right - 130) && x < (right + 345)){
                document.getElementById("winner").innerHTML = "YOU WIN!";
                console.log("winner");

            var party = document.getElementById("party_man");
            party.style.visibility = 'visible';
            party.style.left = parseInt(man.style.left) + 7 + 'px' ;
            party.style.top  = parseInt(man.style.top) - 29 + 'px';

            man.style.visibility = 'hidden';
               

                } 
              }
            }


          	function createFish(){
          		var fish = document.getElementById('fish_blue');
          		fish.style.visibility = 'visible';

              var fish_puff = document.getElementById('puff');
              fish_puff.style.visibility = 'visible';
          	}

            function callAlert(){
              var mermaid = document.getElementById("image1");
              var y = parseInt(mermaid.style.top);
              var x = parseInt(mermaid.style.left);

              var man = document.getElementById("manatee");
              var top = parseInt(man.style.top);
              var right = parseInt(man.style.left);

              if( y > (top - 110) && y < (top + 270)){
                if(x > (right - 130) && x < (right + 345)){
                  $('#manateeModal').modal('toggle');
                  console.log("manatee reached");
                }
              } else {
                $('#manateeModalSight').modal('toggle');
                var man = document.getElementById("manatee");
                man.style.border = "solid black";
              }
              
            }
          	function man_op_two_sel() {
          		var h = document.getElementById("man_head");
              console.log(h.innerHTML)
              if( h.innerHTML != "I'm looking for my fish friend. Have you seen it?"){
                $('#manateeModal').modal('toggle');
              }
          		h.innerHTML = "Here's a picture. I hope you can find him.";
          		var img = document.getElementById("fish_friend");
          		img.style.visibility = "visible";
          		document.getElementById("man_op_two").innerHTML = 'I will try my best!';
          		createFish();
          		return;
          	}


            function leftArrowPressed() {
            var element = document.getElementById("image2")
            var newElement = document.getElementById("image1");
            if(parseInt(element.style.left) <= -5){ return; }
            element.style.visibility = 'hidden';
            newElement.style.visibility = 'visible';
            element.style.left = parseInt(element.style.left) - 7 + 'px';
            newElement.style.left = element.style.left;
            newElement.style.top = element.style.top;
            
            

            }

            function rightArrowPressed() {
            var element = document.getElementById("image1");
            var newElement = document.getElementById("image2")
            if(parseInt(element.style.left) >= 765){ return; }
            element.style.visibility = 'hidden';
            newElement.style.visibility = 'visible';
            element.style.left = parseInt(element.style.left) + 7 + 'px';
            newElement.style.left = element.style.left;
            newElement.style.top = element.style.top;
            
            
            }

            function upArrowPressed() {
            var element = document.getElementById("image1");
            var newElement = document.getElementById("image2")
            if(parseInt(element.style.top) <= -5){ return; }
            element.style.top = parseInt(element.style.top) - 7 + 'px';
            newElement.style.left = element.style.left;
            newElement.style.top = element.style.top;
            
            }

            function downArrowPressed() {
            var element = document.getElementById("image1");
            var newElement = document.getElementById("image2")
            if(parseInt(element.style.top) >= 375){ return; }
            element.style.top = parseInt(element.style.top) + 7 + 'px';
            newElement.style.left = element.style.left;
            newElement.style.top = element.style.top;
            
            }

            function moveSelection(evt) {
                switch (evt.keyCode) {
                    case 37:
                    leftArrowPressed();
                    break;
                    case 39:
                    rightArrowPressed();
                    break;
                    case 38:
                    upArrowPressed();
                    break;
                    case 40:
                    downArrowPressed();
                    break;
                    }
                };

        function docReady()
        {
           
          window.addEventListener('keydown', moveSelection);
          
        }

        function moveManatee(){
          var num = Math.floor(Math.random() * 600);
          while(num < 50){
            num = Math.floor(Math.random() * 600);
          }
          var man = document.getElementById("manatee");
          man.style.left = parseInt(num) + 'px';

          num = 0;
          while(num < 50){
            num = Math.floor(Math.random() * 375);
          }
          man.style.top = parseInt(num) + 'px';
        }


        function updateHeight(){
          var height = document.getElementById("mermaidHeight").value;
          var warn = document.getElementById("danterWarning");
          warn.style.visibility = "hidden";
          if(parseInt(height) > 500){
            warn.style.visibility = "visible";
            return;
          }

          var element = document.getElementById("image1");
          var newElement = document.getElementById("image2");
          newElement.style.height = parseInt(height) + 'px';
          element.style.height = parseInt(height) + 'px';

        }

        function updateFishPos(){

          gameOver();
          var top = document.getElementById("inputTop").value;
          var right = document.getElementById("inputRight").value;
          var warn = document.getElementById("oobWarning");
          warn.style.visibility = "hidden";
          if(parseInt(top) > 500 || parseInt(top) < 0){
            warn.style.visibility = "visible";
            return;
          }
          if(parseInt(right) < 0 || parseInt(right) > 800){
            warn.style.visibility = "visible";
            return;
          }


          var element = document.getElementById("fish_blue");
          element.style.top = parseInt(top) + 'px';
          element.style.left = parseInt(right) + 'px';
          gameOver();

        }

        docReady();

  </script>
    <div class="row" style="padding-top: 15px;">
        <div class="col-lg-10">
          <canvas id="viewport2" onload="docReady()" onkeydown="" onkeyup="" bgcolor='white' height="400px" width="400px"></canvas>
          <!-- images -->

          <!--Meremaid-->
          <img data-toggle="modal" data-target="#mermaidModal" id="image1" src="img/mermaid.png"  style="position:absolute;left:0; top:0;" height="200px" width="auto">
          <img data-toggle="modal" data-target="#mermaidModal"  id="image2" src="img/mermaid_sm_right.png" style="position:absolute;left:0; top:0; visibility: hidden;" height="200px" width="auto">
          <!--manatee-->
          <img onclick="callAlert()" onload="moveManatee()" id="manatee" src="img/manatee.png" style="position:absolute; visibility: visible;" height="200px" width="auto">
          <img id="party_man" src="img/manateeKing.png" style="position:absolute; left:0; top:0; visibility: hidden;" height="200px" width="auto">

          <!--fish-->
          <img data-toggle="modal" data-target="#fishModal" id="fish_blue" src="img/baby_blue.png" style="position:absolute;left:35px; top:400px; visibility: hidden;" height="100px" width="auto">
          <!--fish-puff-->
          <img id="puff" src="img/pufferfish.png" style="position:absolute;left:600px; top:42px; visibility: hidden;" height="100px">
        </div>
        <div class="col-sm-2">
          <button id="instructions" class="btn btn-primary btn-game" data-toggle="modal" data-target="#insructionModal" >Instructions</button>
        </br>
           <button id="restart_button" class="btn btn-primary btn-game" onclick="location.reload()" >Restart</button>
           <br>
           <a href="https://www.linkedin.com/in/jacob-smithburg-68a377143/">
           <img id="jake" class="img rounded-circle" src="img/jake.jpg"></a>
           <p class= "text-center caption"> Jacob Smithburg, Character Artist</p>
      
         <br>
         <a href="https://dettma1.github.io/portfolio/">
           <img id="hannah" class="img rounded-circle" src="img/hannah.jpg"></a>
           <p class="text-center caption"> Hannah Dettmann, Developer</p>

        </div>
        </div>
      </div>
      <br>
  </section>
  <footer style="background-color: #d1ac48ad; height: 30px;">
    <div class = "row">
  </footer>

  <!--Instructions Modal --> 
  <div class="modal fade" id="insructionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Manatee</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
  <div class="modal-body">
   <p>Welcome to CSS Adventure! You can use the arrow keys to move the mermaid around or click on objects to interact with them. Because mermaids are magical, you can change objects using their CSS properities.</p> 
   </p>
  </div>
    </div>
  </div>
  </div>
<!--end of instructions modal-->

  <!-- MERMAID Modal -->
<div class="modal fade" id="mermaidModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Mermaid</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p>You can change the height of the mermaid but it currently makes the game harder to play. </p>
        <div class="form-group row">
        <label for="inputTop" class="col-sm-2 col-form-label">Height</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="mermaidHeight" placeholder="200">
        </div>
      </div>
      <div class="alert alert-danger"  id="danterWarning" style="visibility: hidden" role="alert">
        The height should not exceed 500px!
      </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-modal" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-modal" onclick="updateHeight()" data-dismiss="modal" >Save changes</button>
      </div>
    </div>
  </div>
</div>

<!-- FISH Modal -->
<div class="modal fade" id="fishModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Blue</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <p> The Top and Left give the location of the fish. Try to change them.</p>
       <div class="form-group row">
        <label for="inputTop" class="col-sm-2 col-form-label">Top</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="inputTop" placeholder="400">
        </div>
      </div>
      <div class="form-group row">
        <label for="inputRight" class="col-sm-2 col-form-label">Left</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="inputRight" placeholder="35">
        </div>
      </div>
        <div class="alert alert-danger"  id="oobWarning" style="visibility: hidden" role="alert">
          The fish should stay in the game! It's out of bounds!
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-modal" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-modal" onclick="updateFishPos()" data-dismiss="modal" >Update</button>
      </div>
    </div>
  </div>
</div>

<!--Manatee Modal -->
<div class="modal fade" id="manateeModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Manatee</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
<div class="modal-body">
  <h5 id="man_head">I'm looking for my fish friend. Have you seen it?</h5>
  <img id="fish_friend" src="img/baby_blue.png" style="visibility: hidden; height: 100px;">
  <br>
  <button id="man_op_two" style="visibility: visible" class="btn btn-modal" onclick="man_op_two_sel()">I don't think so.. what does it look like?</button>
</div>
</div>
</div>
</div>

<!-- end modal of manatee -->

<!--Manatee Modal -->
<div class="modal fade" id="manateeModalSight" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Manatee</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
<div class="modal-body">
 <p>The manatee is very old and has limited visibility. Its range of vision is shown with the black box.</p>
</div>
</div>
</div>
</div>


<!-- end modal of manatee -->

  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
    <script src = "../js/boostrap.min.js"></script>
  </body>
</html>